<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ™‚åˆ»è¡¨ç¤º - 100ãƒŸãƒªç§’å˜ä½</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            font-family: 'Courier New', monospace;
            height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            overflow: hidden;
            color: white;
            transition: background 0.5s ease-out, color 0.3s ease-out;
        }

        .time-container {
            text-align: center;
            padding: 20px;
            position: relative;
            z-index: 10;
        }

        .date-display {
            font-size: clamp(1.5rem, 4vw, 3rem);
            margin-bottom: 20px;
            opacity: 0.9;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);
            transition: color 0.3s ease-out, text-shadow 0.3s ease-out;
        }

        .time-display {
            font-size: clamp(3rem, 12vw, 8rem);
            font-weight: bold;
            text-shadow: 3px 3px 6px rgba(0, 0, 0, 0.5);
            line-height: 1.1;
            transition: color 0.3s ease-out, text-shadow 0.3s ease-out;
        }

        .milliseconds {
            color: #ffeb3b;
            font-weight: normal;
            transition: color 0.3s ease-out;
        }

        .info {
            position: absolute;
            bottom: 20px;
            right: 20px;
            font-size: 0.9rem;
            opacity: 0.7;
            text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.5);
            transition: color 0.3s ease-out;
            z-index: 20;
        }

        .wake-lock-status {
            position: absolute;
            top: 20px;
            right: 20px;
            font-size: 0.8rem;
            opacity: 0.6;
            background: rgba(0, 0, 0, 0.3);
            padding: 5px 10px;
            border-radius: 15px;
            display: none;
            z-index: 20;
        }

        .wake-lock-active {
            color: #4caf50;
        }

        .wake-lock-inactive {
            color: #ff9800;
        }

        /* èƒŒæ™¯ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³å›³å½¢ */
        .floating-shape {
            position: fixed;
            font-size: 6rem;
            opacity: 0.6;
            pointer-events: none;
            text-shadow: 0 0 20px rgba(255, 255, 255, 0.8);
            z-index: 5;
            color: #ffffff;
        }



        /* ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–å¯¾å¿œ */
        @media (max-width: 768px) {
            .floating-shape {
                font-size: 3rem;
            }
        }

        @media (max-width: 480px) {
            .floating-shape {
                font-size: 2rem;
            }
        }

        @media (max-width: 768px) {
            .time-container {
                padding: 10px;
            }
            
            .info {
                bottom: 10px;
                right: 10px;
                font-size: 0.8rem;
            }
        }

        /* ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³åŠ¹æœ */
        .time-display {
            animation: glow 2s ease-in-out infinite alternate;
        }

        @keyframes glow {
            from {
                text-shadow: 3px 3px 6px rgba(0, 0, 0, 0.5);
            }
            to {
                text-shadow: 3px 3px 6px rgba(0, 0, 0, 0.5), 0 0 20px rgba(255, 255, 255, 0.2);
            }
        }
    </style>
</head>
<body>
    <div class="time-container">
        <div class="date-display" id="dateDisplay"></div>
        <div class="time-display" id="timeDisplay"></div>
    </div>
    
    <div class="wake-lock-status" id="wakeLockStatus">
        ğŸ”’ ç”»é¢ã‚ªãƒ•é˜²æ­¢
    </div>
    
    <div class="info">
        100ãƒŸãƒªç§’ç²¾åº¦
    </div>

    <script>
        function updateTime() {
            const now = new Date();
            
            // æ—¥ä»˜ã®è¡¨ç¤º
            const year = now.getFullYear();
            const month = String(now.getMonth() + 1).padStart(2, '0');
            const day = String(now.getDate()).padStart(2, '0');
            const weekdays = ['æ—¥', 'æœˆ', 'ç«', 'æ°´', 'æœ¨', 'é‡‘', 'åœŸ'];
            const weekday = weekdays[now.getDay()];
            
            const dateStr = `${year}å¹´${month}æœˆ${day}æ—¥ (${weekday})`;
            
            // æ™‚åˆ»ã®è¡¨ç¤ºï¼ˆ100ãƒŸãƒªç§’å˜ä½ï¼‰
            const hours = String(now.getHours()).padStart(2, '0');
            const minutes = String(now.getMinutes()).padStart(2, '0');
            const seconds = String(now.getSeconds()).padStart(2, '0');
            const milliseconds = String(Math.floor(now.getMilliseconds() / 100));
            
            const timeStr = `${hours}:${minutes}:${seconds}.<span class="milliseconds">${milliseconds}</span>`;
            
            document.getElementById('dateDisplay').textContent = dateStr;
            document.getElementById('timeDisplay').innerHTML = timeStr;
        }

        // é€£ç¶šçš„ãªã‚«ãƒ©ãƒ¼å¤‰åŒ–ã‚·ã‚¹ãƒ†ãƒ 
        let colorTime = 0;
        const colorSpeed = 0.2; // è‰²å¤‰åŒ–ã®é€Ÿåº¦ï¼ˆå°ã•ã„ã»ã©ã‚†ã£ãã‚Šï¼‰

        // HSLã‚’ä½¿ã£ã¦æ»‘ã‚‰ã‹ã«è‰²ã‚’ç”Ÿæˆ
        function hslToRgb(h, s, l) {
            s /= 100;
            l /= 100;
            const c = (1 - Math.abs(2 * l - 1)) * s;
            const x = c * (1 - Math.abs((h / 60) % 2 - 1));
            const m = l - c/2;
            let r = 0, g = 0, b = 0;

            if (0 <= h && h < 60) {
                r = c; g = x; b = 0;
            } else if (60 <= h && h < 120) {
                r = x; g = c; b = 0;
            } else if (120 <= h && h < 180) {
                r = 0; g = c; b = x;
            } else if (180 <= h && h < 240) {
                r = 0; g = x; b = c;
            } else if (240 <= h && h < 300) {
                r = x; g = 0; b = c;
            } else if (300 <= h && h < 360) {
                r = c; g = 0; b = x;
            }

            r = Math.round((r + m) * 255);
            g = Math.round((g + m) * 255);
            b = Math.round((b + m) * 255);

            return `${r},${g},${b}`;
        }

        // æ˜åº¦ã‹ã‚‰æ–‡å­—è‰²ã‚’è‡ªå‹•åˆ¤å®š
        function getTextColor(r, g, b) {
            // æ˜åº¦è¨ˆç®—ï¼ˆWCAGåŸºæº–ï¼‰
            const luminance = (0.299 * r + 0.587 * g + 0.114 * b) / 255;
            return luminance > 0.5 ? '#2c3e50' : '#ffffff';
        }

        // ã‚¢ã‚¯ã‚»ãƒ³ãƒˆè‰²ã‚’ç”Ÿæˆï¼ˆãƒ¡ã‚¤ãƒ³è‰²ã®è£œè‰²ç³»ï¼‰
        function getAccentColor(hue) {
            const accentHue = (hue + 180) % 360; // è£œè‰²
            return `hsl(${accentHue}, 80%, 60%)`;
        }

        function updateColorsGradually() {
            // æ™‚é–“çµŒéã¨ã¨ã‚‚ã«è‰²ç›¸ã‚’å¤‰åŒ–ï¼ˆ0-360åº¦ã‚’å¾ªç’°ï¼‰
            const hue1 = (colorTime * colorSpeed) % 360;
            const hue2 = (colorTime * colorSpeed + 60) % 360; // 60åº¦ãšã‚‰ã—ãŸè‰²ç›¸

            // å½©åº¦ã¨æ˜åº¦ã‚‚å¾®å¦™ã«å¤‰åŒ–ã•ã›ã‚‹
            const saturation1 = 70 + Math.sin(colorTime * colorSpeed * 0.01) * 20;
            const saturation2 = 60 + Math.cos(colorTime * colorSpeed * 0.01) * 25;
            const lightness1 = 55 + Math.sin(colorTime * colorSpeed * 0.015) * 15;
            const lightness2 = 45 + Math.cos(colorTime * colorSpeed * 0.012) * 20;

            // RGBå€¤ã‚’å–å¾—
            const rgb1 = hslToRgb(hue1, saturation1, lightness1);
            const rgb2 = hslToRgb(hue2, saturation2, lightness2);

            // ã‚°ãƒ©ãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³èƒŒæ™¯ã‚’ç”Ÿæˆ
            const background = `linear-gradient(135deg, rgb(${rgb1}) 0%, rgb(${rgb2}) 100%)`;

            // å¹³å‡çš„ãªæ˜åº¦ã‹ã‚‰æ–‡å­—è‰²ã‚’æ±ºå®š
            const [r1, g1, b1] = rgb1.split(',').map(Number);
            const [r2, g2, b2] = rgb2.split(',').map(Number);
            const avgR = (r1 + r2) / 2;
            const avgG = (g1 + g2) / 2;
            const avgB = (b1 + b2) / 2;
            
            const textColor = getTextColor(avgR, avgG, avgB);
            const accentColor = getAccentColor(hue1);
            const shadowColor = textColor === '#ffffff' ? 'rgba(0, 0, 0, 0.5)' : 'rgba(255, 255, 255, 0.7)';

            // è¦ç´ ã«é©ç”¨
            const body = document.body;
            const dateDisplay = document.getElementById('dateDisplay');
            const timeDisplay = document.getElementById('timeDisplay');
            const info = document.querySelector('.info');
            const millisecondElements = document.querySelectorAll('.milliseconds');

            body.style.background = background;
            body.style.color = textColor;
            
            if (dateDisplay) {
                dateDisplay.style.color = textColor;
                dateDisplay.style.textShadow = `2px 2px 4px ${shadowColor}`;
            }
            
            if (timeDisplay) {
                timeDisplay.style.color = textColor;
                timeDisplay.style.textShadow = `3px 3px 6px ${shadowColor}`;
            }
            
            if (info) {
                info.style.color = textColor;
            }

            millisecondElements.forEach(el => {
                el.style.color = accentColor;
            });

            colorTime++;
        }

        // èƒŒæ™¯ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³å›³å½¢ç®¡ç†
        const shapes = ['â–¡', 'â—‹', 'â˜†', 'â–³', 'â—‡', 'â™¦', 'â™ ', 'â™£', 'â™¥', 'âœ¦', 'âœ§', 'â€»'];
        const activeShapes = [];
        const maxShapes = 5;
        const minShapes = 1;

        function createFloatingShape() {
            if (activeShapes.length >= maxShapes) return;

            const shape = document.createElement('div');
            shape.className = 'floating-shape';
            
            // ãƒ©ãƒ³ãƒ€ãƒ ãªå›³å½¢ã‚’é¸æŠ
            const randomShape = shapes[Math.floor(Math.random() * shapes.length)];
            shape.textContent = randomShape;
            
            // ç”»é¢ã®4æ–¹å‘ã‹ã‚‰ãƒ©ãƒ³ãƒ€ãƒ ã«é¸æŠï¼ˆä¸Šä¸‹å·¦å³ï¼‰
            const directions = ['top', 'bottom', 'left', 'right'];
            const direction = directions[Math.floor(Math.random() * directions.length)];
            
            let startX, startY, endX, endY;
            
            // æ–¹å‘ã«å¿œã˜ã¦é–‹å§‹ä½ç½®ã¨çµ‚äº†ä½ç½®ã‚’è¨­å®š
            switch (direction) {
                case 'top': // ä¸Šã‹ã‚‰ä¸‹ã¸
                    startX = Math.random() * window.innerWidth;
                    startY = -50;
                    endX = startX + (Math.random() - 0.5) * 300; // æ¨ªã«ã‚‚å°‘ã—ãšã‚Œã‚‹
                    endY = window.innerHeight + 50;
                    break;
                case 'bottom': // ä¸‹ã‹ã‚‰ä¸Šã¸
                    startX = Math.random() * window.innerWidth;
                    startY = window.innerHeight + 50;
                    endX = startX + (Math.random() - 0.5) * 300;
                    endY = -50;
                    break;
                case 'left': // å·¦ã‹ã‚‰å³ã¸
                    startX = -50;
                    startY = Math.random() * window.innerHeight;
                    endX = window.innerWidth + 50;
                    endY = startY + (Math.random() - 0.5) * 300; // ç¸¦ã«ã‚‚å°‘ã—ãšã‚Œã‚‹
                    break;
                case 'right': // å³ã‹ã‚‰å·¦ã¸
                    startX = window.innerWidth + 50;
                    startY = Math.random() * window.innerHeight;
                    endX = -50;
                    endY = startY + (Math.random() - 0.5) * 300;
                    break;
            }
            
            // åˆæœŸä½ç½®ã‚’è¨­å®š
            shape.style.left = startX + 'px';
            shape.style.top = startY + 'px';
            
            // ãƒ©ãƒ³ãƒ€ãƒ ãªã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³æ™‚é–“ï¼ˆ10-20ç§’ï¼‰
            const duration = 10 + Math.random() * 10;
            
            // ç§»å‹•è·é›¢ã‚’è¨ˆç®—
            const deltaX = endX - startX;
            const deltaY = endY - startY;
            
            // ãƒ©ãƒ³ãƒ€ãƒ ãªå›è»¢
            const rotationDegrees = 360 + Math.random() * 360; // 1-2å›è»¢
            
            const keyframeName = `float-${Date.now()}-${Math.floor(Math.random() * 10000)}`;
            
            // ã‚«ã‚¹ã‚¿ãƒ ã‚­ãƒ¼ãƒ•ãƒ¬ãƒ¼ãƒ ã‚’å‹•çš„ã«ä½œæˆ
            const style = document.createElement('style');
            style.textContent = `
                @keyframes ${keyframeName} {
                    0% {
                        transform: translate(0px, 0px) rotate(0deg) scale(0.5);
                        opacity: 0;
                    }
                    10% {
                        opacity: 0.6;
                    }
                    90% {
                        opacity: 0.6;
                    }
                    100% {
                        transform: translate(${deltaX}px, ${deltaY}px) rotate(${rotationDegrees}deg) scale(1.2);
                        opacity: 0;
                    }
                }
            `;
            document.head.appendChild(style);
            
            // ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã‚’è¨­å®š
            shape.style.animationName = keyframeName;
            shape.style.animationDuration = duration + 's';
            shape.style.animationTimingFunction = 'linear';
            shape.style.animationIterationCount = '1';
            shape.style.animationFillMode = 'forwards';
            
            // ã‚ˆã‚Šã¯ã£ãã‚Šã—ãŸè‰²å‘³
            const colors = ['#ff6b6b', '#4ecdc4', '#45b7d1', '#96ceb4', '#ffeaa7', '#dda0dd', '#98d8c8', '#ffd93d', '#6c5ce7', '#a29bfe'];
            const randomColor = colors[Math.floor(Math.random() * colors.length)];
            shape.style.color = randomColor;
            
            document.body.appendChild(shape);
            activeShapes.push({element: shape, style: style});
            
            // ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³çµ‚äº†æ™‚ã«ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—
            shape.addEventListener('animationend', () => {
                if (shape.parentNode) {
                    shape.parentNode.removeChild(shape);
                }
                if (style.parentNode) {
                    style.parentNode.removeChild(style);
                }
                const index = activeShapes.findIndex(s => s.element === shape);
                if (index > -1) {
                    activeShapes.splice(index, 1);
                }
            });
        }

        function manageFloatingShapes() {
            // æœ€å°æ•°ã‚’ä¸‹å›ã£ã¦ã„ã‚‹å ´åˆã¯å³åº§ã«è¿½åŠ 
            if (activeShapes.length < minShapes) {
                createFloatingShape();
            }
            // ãƒ©ãƒ³ãƒ€ãƒ ã«æ–°ã—ã„å›³å½¢ã‚’è¿½åŠ ï¼ˆ50%ã®ç¢ºç‡ã«ä¸Šã’ã‚‹ï¼‰
            else if (activeShapes.length < maxShapes && Math.random() < 0.5) {
                createFloatingShape();
            }
        }

        // å›³å½¢ç®¡ç†ã‚’1ç§’ã”ã¨ã«å®Ÿè¡Œï¼ˆé »åº¦ã‚’ä¸Šã’ã‚‹ï¼‰
        setInterval(manageFloatingShapes, 1000);

        // 100ãƒŸãƒªç§’ã”ã¨ã«è‰²ã‚’æ›´æ–°ï¼ˆæ™‚åˆ»æ›´æ–°ã¨åŒã˜é »åº¦ï¼‰
        setInterval(updateColorsGradually, 100);

        // 100ãƒŸãƒªç§’ã”ã¨ã«æ™‚åˆ»æ›´æ–°
        setInterval(updateTime, 100);
        
        // åˆå›å®Ÿè¡Œ
        updateTime();

        // ãƒ•ãƒ«ã‚¹ã‚¯ãƒªãƒ¼ãƒ³åˆ‡ã‚Šæ›¿ãˆæ©Ÿèƒ½ï¼ˆãƒ€ãƒ–ãƒ«ã‚¯ãƒªãƒƒã‚¯ã§åˆ‡ã‚Šæ›¿ãˆï¼‰
        document.addEventListener('dblclick', function() {
            if (!document.fullscreenElement) {
                document.documentElement.requestFullscreen().catch(err => {
                    console.log('ãƒ•ãƒ«ã‚¹ã‚¯ãƒªãƒ¼ãƒ³è¡¨ç¤ºã«å¤±æ•—ã—ã¾ã—ãŸ:', err);
                });
            } else {
                if (document.exitFullscreen) {
                    document.exitFullscreen();
                }
            }
        });

        // ESCã‚­ãƒ¼ã§ãƒ•ãƒ«ã‚¹ã‚¯ãƒªãƒ¼ãƒ³çµ‚äº†
        document.addEventListener('keydown', function(e) {
            if (e.key === 'Escape' && document.fullscreenElement) {
                document.exitFullscreen();
            }
        });

        // Wake Lock API ã§ç”»é¢ã‚’æ¶ˆã•ãªã„ã‚ˆã†ã«ã™ã‚‹
        let wakeLock = null;
        const wakeLockStatus = document.getElementById('wakeLockStatus');

        function updateWakeLockStatus(isActive) {
            if (wakeLockStatus) {
                wakeLockStatus.style.display = 'block';
                wakeLockStatus.className = `wake-lock-status ${isActive ? 'wake-lock-active' : 'wake-lock-inactive'}`;
                wakeLockStatus.textContent = isActive ? 'ğŸ”’ ç”»é¢ã‚ªãƒ•é˜²æ­¢ä¸­' : 'âš ï¸ ç”»é¢ã‚ªãƒ•é˜²æ­¢ç„¡åŠ¹';
                
                // 5ç§’å¾Œã«éè¡¨ç¤º
                setTimeout(() => {
                    if (wakeLockStatus) {
                        wakeLockStatus.style.display = 'none';
                    }
                }, 5000);
            }
        }

        async function requestWakeLock() {
            if ('wakeLock' in navigator) {
                try {
                    wakeLock = await navigator.wakeLock.request('screen');
                    console.log('Wake Lock ãŒæœ‰åŠ¹ã«ãªã‚Šã¾ã—ãŸ');
                    updateWakeLockStatus(true);
                    
                    // Wake Lock ãŒè§£é™¤ã•ã‚ŒãŸæ™‚ã®ã‚¤ãƒ™ãƒ³ãƒˆãƒªã‚¹ãƒŠãƒ¼
                    wakeLock.addEventListener('release', () => {
                        console.log('Wake Lock ãŒè§£é™¤ã•ã‚Œã¾ã—ãŸ');
                        updateWakeLockStatus(false);
                        wakeLock = null;
                    });
                } catch (err) {
                    console.log('Wake Lock ã®å–å¾—ã«å¤±æ•—:', err);
                    updateWakeLockStatus(false);
                }
            } else {
                console.log('ã“ã®ãƒ–ãƒ©ã‚¦ã‚¶ã¯Wake Lock APIã«å¯¾å¿œã—ã¦ã„ã¾ã›ã‚“');
                // ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯: å®šæœŸçš„ãªç”»é¢ã‚¢ã‚¯ãƒ†ã‚£ãƒ“ãƒ†ã‚£
                startScreenKeepAlive();
            }
        }

        // Wake Lock API ãŒä½¿ãˆãªã„å ´åˆã®ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯
        function startScreenKeepAlive() {
            // 5åˆ†ã”ã¨ã«å°ã•ãªè¦ç´ ã‚’ç‚¹æ»…ã•ã›ã¦ç”»é¢ã‚’ã€Œã‚¢ã‚¯ãƒ†ã‚£ãƒ–ã€ã«ä¿ã¤
            setInterval(() => {
                const dummy = document.createElement('div');
                dummy.style.position = 'absolute';
                dummy.style.opacity = '0.001';
                dummy.style.left = '-1px';
                dummy.style.top = '-1px';
                dummy.style.width = '1px';
                dummy.style.height = '1px';
                document.body.appendChild(dummy);
                
                setTimeout(() => {
                    if (dummy.parentNode) {
                        dummy.parentNode.removeChild(dummy);
                    }
                }, 100);
            }, 300000); // 5åˆ†
        }

        // ãƒšãƒ¼ã‚¸ãŒå†ã³è¡¨ç¤ºã•ã‚ŒãŸæ™‚ã«Wake Lockã‚’å†å–å¾—
        document.addEventListener('visibilitychange', async () => {
            if (wakeLock !== null && document.visibilityState === 'visible') {
                await requestWakeLock();
            }
        });

        // ãƒšãƒ¼ã‚¸èª­ã¿è¾¼ã¿å®Œäº†æ™‚ã®å‡¦ç†
        window.addEventListener('load', async function() {
            const info = document.querySelector('.info');
            const originalText = info.textContent;
            
            // Wake Lock ã‚’é–‹å§‹
            await requestWakeLock();
            
            // åˆå›ã‚«ãƒ©ãƒ¼æ›´æ–°ã‚’é–‹å§‹
            updateColorsGradually();
            
            // åˆå›å›³å½¢ã‚’è¤‡æ•°è¡¨ç¤º
            createFloatingShape();
            setTimeout(() => createFloatingShape(), 500);
            setTimeout(() => createFloatingShape(), 1000);
            
            // æƒ…å ±è¡¨ç¤ºã®æ›´æ–°
            let infoText = '100ãƒŸãƒªç§’ç²¾åº¦ | ãƒ€ãƒ–ãƒ«ã‚¯ãƒªãƒƒã‚¯ã§ãƒ•ãƒ«ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ | é€£ç¶šã‚«ãƒ©ãƒ¼å¤‰åŒ– | æµ®éŠå›³å½¢';
            if ('wakeLock' in navigator) {
                infoText += ' | ç”»é¢ã‚ªãƒ•é˜²æ­¢ä¸­';
            }
            info.textContent = infoText;
            
            setTimeout(() => {
                info.textContent = originalText;
            }, 5000);
        });
    </script>
</body>
</html>